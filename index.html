<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aşk Mantık İntikam - Görsel Roman</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            background: url('https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=2070&auto=format&fit=crop') no-repeat center center fixed;
            background-size: cover;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: #fff;
            position: relative;
        }
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1;
        }
        .game-container {
            position: relative;
            z-index: 2;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-width: 900px;
            padding: 40px;
            text-align: center;
            animation: fadeIn 1.2s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        h1 {
            font-family: 'Playfair Display', serif;
            color: #ff4081;
            font-size: 3em;
            margin-bottom: 20px;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        .scene-text {
            font-size: 1.3em;
            line-height: 1.7;
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            border-left: 6px solid #ff4081;
            color: #fff;
            animation: slideIn 0.5s ease-in-out;
        }
        .result-text {
            font-size: 1.2em;
            color: #ff80ab;
            margin-bottom: 20px;
            font-style: italic;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
            animation: slideIn 0.5s ease-in-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        .choices {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        button {
            background: linear-gradient(45deg, #ff4081, #f50057);
            color: white;
            border: none;
            padding: 15px 25px;
            font-size: 1.1em;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        button:hover {
            background: linear-gradient(45deg, #f50057, #c51162);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        button:active {
            transform: translateY(0);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        .continue-btn {
            background: linear-gradient(45deg, #2196f3, #1976d2);
        }
        .continue-btn:hover {
            background: linear-gradient(45deg, #1976d2, #1565c0);
        }
        .score {
            margin-top: 25px;
            font-size: 1.1em;
            color: #fff;
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 10px;
        }
        .error {
            color: #ff1744;
            font-size: 1.2em;
            margin-top: 20px;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>Aşk Mantık İntikam</h1>
        <div class="scene-text" id="scene-text">Oyun yükleniyor...</div>
        <div class="result-text" id="result-text"></div>
        <div class="choices" id="choices"></div>
        <div class="score" id="score"></div>
        <div class="error" id="error"></div>
    </div>

    <script>
        let player = { love: 0, logic: 0, revenge: 0 };
        let visitedScenes = new Set();
        let currentSceneId = 0;
        let lastResult = '';
        let isShowingResult = false;
        let nextSceneId = 0;

        const scenes = [
            {
                id: 0,
                text: "Esra, Ozan’ın şirketinde ilk günündesin. Toplantıda Ozan sana soğuk bakıyor. Ne yaparsın?",
                choices: [
                    { text: "Ozan’a gülümse.", nextScene: 1, points: { love: 3 }, result: "Ozan şaşırdı, ama hafifçe gülümsedi." },
                    { text: "Sunuma odaklan.", nextScene: 1, points: { logic: 3 }, result: "Patronun seni profesyonel buldu." },
                    { text: "Ozan’a iğneleyici bir laf söyle.", nextScene: 1, points: { revenge: 3 }, result: "Ozan sinirlendi, ortam gerildi." }
                ]
            },
            {
                id: 1,
                text: "Esra, Çınar seni akşam yemeğine davet ediyor. Ozan bunu duyuyor. Ne yaparsın?",
                choices: [
                    { text: "Daveti kabul et.", nextScene: 2, points: { love: 3 }, result: "Çınar’la keyifli bir akşam geçirdin." },
                    { text: "Nazikçe reddet.", nextScene: 2, points: { logic: 3 }, result: "Ozan rahatladı, Çınar üzüldü." },
                    { text: "Ozan’ı kıskandırmak için flört et.", nextScene: 2, points: { revenge: 3 }, result: "Ozan kıskandı, sana soğuk davrandı." }
                ]
            },
            {
                id: 2,
                text: "Esra, Zeynep sana Ozan’ın seni sorduğunu söylüyor. Ne yaparsın?",
                choices: [
                    { text: "Ozan’la konuş.", nextScene: 3, points: { love: 3 }, result: "Ozan samimiydi, aranızda sıcak bir sohbet geçti." },
                    { text: "Zeynep’e teşekkür edip geçiştir.", nextScene: 3, points: { logic: 3 }, result: "Zeynep seninle daha yakınlaştı." },
                    { text: "Ozan’a alaycı bir mesaj at.", nextScene: 3, points: { revenge: 3 }, result: "Ozan sinirlendi, cevap vermedi." }
                ]
            },
            {
                id: 3,
                text: "Esra, Ozan sana eski bir fotoğrafınızı gösteriyor. Ne yaparsın?",
                choices: [
                    { text: "Duygularını paylaş.", nextScene: 4, points: { love: 4 }, result: "Ozan duygulandı, aranızda bağ oluştu." },
                    { text: "Konuyu değiştir.", nextScene: 4, points: { logic: 3 }, result: "Ozan saygı duydu, ama mesafeliydi." },
                    { text: "Fotoğrafı yırt.", nextScene: 4, points: { revenge: 3 }, result: "Ozan şok oldu, sinirlendi." }
                ]
            },
            {
                id: 4,
                text: "Esra, Çağla ofiste senin projeni eleştiriyor. Ne yaparsın?",
                choices: [
                    { text: "Ozan’la konuşup destek iste.", nextScene: 5, points: { love: 3 }, result: "Ozan seni savundu." },
                    { text: "Projeni savun.", nextScene: 5, points: { logic: 3 }, result: "Patronun seni takdir etti." },
                    { text: "Çağla’ya iğneleyici bir cevap ver.", nextScene: 5, points: { revenge: 3 }, result: "Çağla sinirlendi, ama sen öne çıktın." }
                ]
            },
            {
                id: 5,
                text: "Esra, Menekşe evde sana Ozan’ın başka biriyle görüştüğünü ima ediyor. Ne yaparsın?",
                choices: [
                    { text: "Ozan’a sor.", nextScene: 6, points: { love: 3 }, result: "Ozan söylentiyi yalanladı, samimiydi." },
                    { text: "Menekşe’yi görmezden gel.", nextScene: 6, points: { logic: 3 }, result: "Menekşe bozuldu, ama sen rahatladın." },
                    { text: "Ozan’a laf sok.", nextScene: 6, points: { revenge: 3 }, result: "Ozan üzüldü, ama Menekşe memnun." }
                ]
            },
            {
                id: 6,
                text: "Esra, Çınar seni bir konsere davet ediyor. Ne yaparsın?",
                choices: [
                    { text: "Daveti kabul et.", nextScene: 7, points: { love: 3 }, result: "Çınar’la eğlenceli bir akşam geçirdin." },
                    { text: "Reddet ve işe odaklan.", nextScene: 7, points: { logic: 3 }, result: "Çınar üzüldü, ama sen işine devam ettin." },
                    { text: "Ozan’ı kıskandırmak için git.", nextScene: 7, points: { revenge: 3 }, result: "Ozan kıskandı, sana mesafeliydi." }
                ]
            },
            {
                id: 7,
                text: "Esra, Ozan sana bir iş seyahati için ortak çalışmayı öneriyor. Ne yaparsın?",
                choices: [
                    { text: "Teklifi kabul et.", nextScene: 8, points: { love: 3 }, result: "Ozan’la seyahat keyifli geçti." },
                    { text: "Kendi projene odaklan.", nextScene: 8, points: { logic: 3 }, result: "Ozan saygı duydu, ama mesafeliydi." },
                    { text: "Teklifi alaycı reddet.", nextScene: 8, points: { revenge: 3 }, result: "Ozan sinirlendi, uzaklaştı." }
                ]
            },
            {
                id: 8,
                text: "Esra, Zümrüt sana Ozan’la barışman için baskı yapıyor. Ne yaparsın?",
                choices: [
                    { text: "Ozan’la konuşmaya karar ver.", nextScene: 9, points: { love: 3 }, result: "Ozan samimiydi, aranız ısındı." },
                    { text: "Zümrüt’ü kibarca reddet.", nextScene: 9, points: { logic: 3 }, result: "Zümrüt alındı, ama sen rahatladın." },
                    { text: "Zümrüt’e laf sok.", nextScene: 9, points: { revenge: 3 }, result: "Zümrüt sinirlendi, ama sen keyiflendin." }
                ]
            },
            {
                id: 9,
                text: "Esra, ofiste Ozan’ın eski bir mektubunu buluyorsun. Ne yaparsın?",
                choices: [
                    { text: "Ozan’la mektubu konuş.", nextScene: 10, points: { love: 4 }, result: "Ozan duygulandı, anılar canlandı." },
                    { text: "Mektubu sakla.", nextScene: 10, points: { logic: 3 }, result: "Mektubu sakladın, kimse fark etmedi." },
                    { text: "Mektubu yırt.", nextScene: 10, points: { revenge: 3 }, result: "Ozan mektubu bulamayınca üzüldü." }
                ]
            },
            {
                id: 10,
                text: "Esra, Çağla seni bir iş yemeğinde zor durumda bırakıyor. Ne yaparsın?",
                choices: [
                    { text: "Ozan’dan yardım iste.", nextScene: 11, points: { love: 3 }, result: "Ozan seni kurtardı, aranız ısındı." },
                    { text: "Kendi başına durumu idare et.", nextScene: 11, points: { logic: 3 }, result: "Herkes seni takdir etti." },
                    { text: "Çağla’ya laf sok.", nextScene: 11, points: { revenge: 3 }, result: "Çağla bozuldu, ama ortam gerildi." }
                ]
            },
            {
                id: 11,
                text: "Esra, Zeynep sana Ozan’ın bir sürpriz planladığını söylüyor. Ne yaparsın?",
                choices: [
                    { text: "Ozan’la konuş.", nextScene: 12, points: { love: 3 }, result: "Ozan sürprizi itiraf etti, samimiydi." },
                    { text: "Hiçbir şey yapma.", nextScene: 12, points: { logic: 3 }, result: "Zeynep senin sakinliğini takdir etti." },
                    { text: "Ozan’a şüpheli bir mesaj at.", nextScene: 12, points: { revenge: 3 }, result: "Ozan alındı, sürpriz bozuldu." }
                ]
            },
            {
                id: 12,
                text: "Esra, Menekşe bir aile yemeğinde sana laf sokuyor. Ne yaparsın?",
                choices: [
                    { text: "Ozan’la durumu paylaş.", nextScene: 13, points: { love: 3 }, result: "Ozan seni savundu, aranız ısındı." },
                    { text: "Menekşe’yi görmezden gel.", nextScene: 13, points: { logic: 3 }, result: "Menekşe bozuldu, sen sakin kaldın." },
                    { text: "Menekşe’ye laf sok.", nextScene: 13, points: { revenge: 3 }, result: "Menekşe sinirlendi, ortam gerildi." }
                ]
            },
            {
                id: 13,
                text: "Esra, Çınar seni bir tiyatro oyununa davet ediyor. Ne yaparsın?",
                choices: [
                    { text: "Daveti kabul et.", nextScene: 14, points: { love: 3 }, result: "Çınar’la keyifli bir akşam geçirdin." },
                    { text: "Reddet ve işe odaklan.", nextScene: 14, points: { logic: 3 }, result: "Çınar üzüldü, ama sen işine devam ettin." },
                    { text: "Ozan’ı kıskandırmak için git.", nextScene: 14, points: { revenge: 3 }, result: "Ozan kıskandı, sana soğuk davrandı." }
                ]
            },
            {
                id: 14,
                text: "Esra, Ozan sana bir özür hediyesi veriyor. Ne yaparsın?",
                choices: [
                    { text: "Hediyeyi kabul et.", nextScene: 15, points: { love: 4 }, result: "Ozan mutlu oldu, aranızda bağ oluştu." },
                    { text: "Nazikçe reddet.", nextScene: 15, points: { logic: 3 }, result: "Ozan saygı duydu, ama üzüldü." },
                    { text: "Hediyeyi Çınar’a göster.", nextScene: 15, points: { revenge: 3 }, result: "Ozan kıskandı, sinirlendi." }
                ]
            },
            {
                id: 15,
                text: "Esra, Musa sana Ozan’la barışman için duygusal bir konuşma yapıyor. Ne yaparsın?",
                choices: [
                    { text: "Ozan’la konuşmaya karar ver.", nextScene: 16, points: { love: 3 }, result: "Ozan samimiydi, aranız ısındı." },
                    { text: "Babana teşekkür et, ama karar verme.", nextScene: 16, points: { logic: 3 }, result: "Musa seni anlayışla karşıladı." },
                    { text: "Ozan’a mesafeli davran.", nextScene: 16, points: { revenge: 3 }, result: "Ozan üzüldü, ama sen kararlıydın." }
                ]
            },
            {
                id: 16,
                text: "Esra, ofiste bir projenle ödül kazanıyorsun. Ne yaparsın?",
                choices: [
                    { text: "Ozan’la kutla.", nextScene: 17, points: { love: 3 }, result: "Ozan seninle gurur duydu." },
                    { text: "Sessizce devam et.", nextScene: 17, points: { logic: 3 }, result: "Başarın konuşuldu, ama dikkat çekmedin." },
                    { text: "Çağla’nın projesini gölgele.", nextScene: 17, points: { revenge: 3 }, result: "Çağla sinirlendi, ama sen öne çıktın." }
                ]
            },
            {
                id: 17,
                text: "Esra, Elif sana Ozan’ın eski bir anınızı anlattığını söylüyor. Ne yaparsın?",
                choices: [
                    { text: "Ozan’la anıyı konuş.", nextScene: 18, points: { love: 4 }, result: "Ozan duygulandı, aranızda bağ oluştu." },
                    { text: "Konuyu geçiştir.", nextScene: 18, points: { logic: 3 }, result: "Elif senin sakinliğini takdir etti." },
                    { text: "Ozan’a iğneleyici bir yorum yap.", nextScene: 18, points: { revenge: 3 }, result: "Ozan alındı, mesafeliydi." }
                ]
            },
            {
                id: 18,
                text: "Esra, Çağla ofiste Ozan’la samimi görünüyor. Ne yaparsın?",
                choices: [
                    { text: "Ozan’la konuş.", nextScene: 19, points: { love: 3 }, result: "Ozan durumu açıkladı, samimiydi." },
                    { text: "Durumu görmezden gel.", nextScene: 19, points: { logic: 3 }, result: "Sakinliğin herkesin dikkatini çekti." },
                    { text: "Çağla’ya laf sok.", nextScene: 19, points: { revenge: 3 }, result: "Çağla bozuldu, ama Ozan rahatsız oldu." }
                ]
            },
            {
                id: 19,
                text: "Esra, Çınar seni bir doğa yürüyüşüne davet ediyor. Ne yaparsın?",
                choices: [
                    { text: "Daveti kabul et.", nextScene: 20, points: { love: 3 }, result: "Çınar’la keyifli bir gün geçirdin." },
                    { text: "Reddet ve işe odaklan.", nextScene: 20, points: { logic: 3 }, result: "Çınar üzüldü, ama sen işine devam ettin." },
                    { text: "Ozan’ı kıskandırmak için git.", nextScene: 20, points: { revenge: 3 }, result: "Ozan kıskandı, sana soğuk davrandı." }
                ]
            },
            {
                id: 20,
                text: "Esra, Ozan sana bir iş ortaklığı teklif ediyor. Ne yaparsın?",
                choices: [
                    { text: "Teklifi kabul et.", nextScene: 21, points: { love: 3 }, result: "Ozan’la ortaklık keyifliydi." },
                    { text: "Kendi yolunu çiz.", nextScene: 21, points: { logic: 3 }, result: "Ozan saygı duydu, ama mesafeliydi." },
                    { text: "Teklifi alaycı reddet.", nextScene: 21, points: { revenge: 3 }, result: "Ozan sinirlendi, uzaklaştı." }
                ]
            },
            {
                id: 21,
                text: "Esra, Menekşe sana Ozan’ı unutman için baskı yapıyor. Ne yaparsın?",
                choices: [
                    { text: "Ozan’la konuş.", nextScene: 22, points: { love: 3 }, result: "Ozan samimiydi, aranız ısındı." },
                    { text: "Menekşe’yi görmezden gel.", nextScene: 22, points: { logic: 3 }, result: "Menekşe bozuldu, sen rahatladın." },
                    { text: "Menekşe’ye laf sok.", nextScene: 22, points: { revenge: 3 }, result: "Menekşe sinirlendi, ortam gerildi." }
                ]
            },
            {
                id: 22,
                text: "Esra, Zeynep sana Ozan’ın seni bir projede görmek istediğini söylüyor. Ne yaparsın?",
                choices: [
                    { text: "Ozan’la konuş.", nextScene: 23, points: { love: 3 }, result: "Ozan seni projede istediğini doğruladı." },
                    { text: "Projeye hazırlan.", nextScene: 23, points: { logic: 3 }, result: "Projen için iyi bir başlangıç yaptın." },
                    { text: "Ozan’ı görmezden gel.", nextScene: 23, points: { revenge: 3 }, result: "Ozan üzüldü, ama sen umursamadın." }
                ]
            },
            {
                id: 23,
                text: "Esra, Ozan sana eski bir hediye kutusu gösteriyor. Ne yaparsın?",
                choices: [
                    { text: "Ozan’la hediyeyi konuş.", nextScene: 24, points: { love: 4 }, result: "Ozan duygulandı, anılar canlandı." },
                    { text: "Kutuyu sakla.", nextScene: 24, points: { logic: 3 }, result: "Kutuyu sakladın, kimse fark etmedi." },
                    { text: "Kutuyu geri ver.", nextScene: 24, points: { revenge: 3 }, result: "Ozan üzüldü, ama sen kararlıydın." }
                ]
            },
            {
                id: 24,
                text: "Esra, hikayen sona eriyor! Son kararın ne olacak?",
                choices: [
                    { text: "Aşk yolunu seç.", nextScene: 25, points: { love: 5 }, result: "Aşk kazandı, kalbin huzurlu." },
                    { text: "Mantık yolunu seç.", nextScene: 25, points: { logic: 5 }, result: "Mantık galip geldi, kariyerin zirvede." },
                    { text: "İntikam yolunu seç.", nextScene: 25, points: { revenge: 5 }, result: "İntikam aldın, ama yalnızsın." }
                ]
            },
            {
                id: 25,
                text: "Oyun bitti! Puanlarına göre hikayen şekillendi.",
                choices: []
            }
        ];

        function renderScene(sceneId) {
            if (sceneId < 0 || sceneId >= scenes.length) {
                document.getElementById('error').innerText = `Hata: Geçersiz sahne ID’si (${sceneId})!`;
                console.error("Geçersiz sahne ID’si: " + sceneId);
                endGame();
                return;
            }

            const scene = scenes.find(s => s.id === sceneId);
            if (!scene) {
                document.getElementById('error').innerText = `Hata: Sahne ${sceneId} bulunamadı!`;
                console.error("Sahne bulunamadı: " + sceneId);
                endGame();
                return;
            }

            document.getElementById('error').innerText = '';
            visitedScenes.add(sceneId);
            console.log(`Sahne ${sceneId} ziyaret edildi. Toplam: ${visitedScenes.size}/25`);

            if (visitedScenes.size >= 25 && sceneId !== 25) {
                endGame();
                return;
            }

            document.getElementById('scene-text').innerText = scene.text;
            document.getElementById('result-text').innerText = lastResult;
            const choicesDiv = document.getElementById('choices');
            choicesDiv.innerHTML = '';

            if (!isShowingResult && scene.choices.length > 0) {
                scene.choices.forEach(choice => {
                    const button = document.createElement('button');
                    button.innerText = choice.text;
                    button.onclick = () => {
                        if (choice.points) {
                            player.love += choice.points.love || 0;
                            player.logic += choice.points.logic || 0;
                            player.revenge += choice.points.revenge || 0;
                        }
                        lastResult = choice.result || "Seçimin sonuçları ortaya çıktı.";
                        nextSceneId = choice.nextScene;
                        isShowingResult = true;
                        document.getElementById('scene-text').innerText = '';
                        document.getElementById('result-text').innerText = lastResult;
                        choicesDiv.innerHTML = '';
                        const continueButton = document.createElement('button');
                        continueButton.innerText = 'Devam';
                        continueButton.className = 'continue-btn';
                        continueButton.onclick = () => {
                            isShowingResult = false;
                            currentSceneId = nextSceneId;
                            console.log(`Devam butonuna tıklandı, bir sonraki sahne: ${currentSceneId}`);
                            renderScene(currentSceneId);
                        };
                        choicesDiv.appendChild(continueButton);
                        updateScore();
                    };
                    choicesDiv.appendChild(button);
                });
            }

            updateScore();
        }

        function updateScore() {
            document.getElementById('score').innerText = `Aşk: ${player.love} | Mantık: ${player.logic} | İntikam: ${player.revenge} | Sorular: ${visitedScenes.size}/25`;
        }

        function endGame() {
            const maxScore = Math.max(player.love, player.logic, player.revenge);
            let endingMessage = maxScore === player.love
                ? "Aşkla dolu bir yolculuk! Esra, kalbinin sesini dinledin ve huzuru buldun."
                : maxScore === player.logic
                ? "Mantığın zaferi! Esra, kararların seni başarıya taşıdı, kariyerinde zirveye ulaştın."
                : "İntikamla dolu bir yol! Esra, rakiplerini alt ettin, ama yalnızlık da yanında geldi.";

            document.getElementById('scene-text').innerText = endingMessage;
            document.getElementById('result-text').innerText = '';
            document.getElementById('choices').innerHTML = '';
            document.getElementById('score').innerText = `Final Puanları - Aşk: ${player.love} | Mantık: ${player.logic} | İntikam: ${player.revenge}`;
            document.getElementById('error').innerText = '';
            console.log("Oyun sona erdi.");
        }

        try {
            console.log("Oyun başlatılıyor...");
            renderScene(currentSceneId);
        } catch (error) {
            document.getElementById('error').innerText = 'Oyun başlatılırken hata oluştu. Sayfayı yenileyin.';
            console.error("Oyun başlatma hatası: ", error);
        }
    </script>
</body>
</html>
